##########################################################################################
# To create a K8s secret for pulling images from GHCR that will work with the other 
# instructions for building and deploying images within the essesseff DevOps platform, 
# please replace the username, password, email and auth placeholders with actual values.
#
# To generate BASE64_OF_USERNAME:PASSWORD, execute the following from a shell terminal:
#
# echo -n "<your-argocd-machine-username>:<your-argocd-machine-user-GitHub-PAT>" | base64
# 
# Be sure to use a GitHub Argo CD machine user and PAT with permissions to access GHCR.
# Once you've replaced the username, password, email and auth placeholders with actual
# values, execute the following from a shell terminal:
#
# kubectl apply -f ghcr-credentials-secret.yaml
#
##########################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: ghcr-credentials
  namespace: essesseff-hello-world-go-template
type: kubernetes.io/dockerconfigjson
stringData:
  .dockerconfigjson: |
    {
      "auths": {
        "ghcr.io": {
          "username": "<your-argocd-machine-username>",
          "password": "<your-argocd-machine-user-GitHub-PAT>",
          "email": "<your-email@example.com>",
          "auth": "BASE64_OF_USERNAME:PASSWORD"
        }
      }
    }
